<div class="container-fluid page">
  <div class="header">
    <div class="row d-flex align-items-center justify-content-between">
      <div class="col-md-8 dash"
        style="font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif; font-size: xx-large;"> <i
          class="bi bi-speedometer2"></i>&nbsp; Admin Portal - (For Service )</div>
      <div class="col-md-4 comdtl">
        <span class="comname">{{organisationName}} <br></span>
        <hr>
        <i class="bi bi-envelope-fill"></i>&nbsp; Email : {{organisationEmail}}<br>
        <i class="bi bi-telephone-fill"></i>&nbsp; Contact Number : {{organisationContact}}<br>
        <i class="bi bi-geo-alt-fill"></i>&nbsp; Address : {{organisationAddress}}, Pin - {{organisationPin}}
      </div>
    </div>
  </div>
  <!-- billDetailsScrool -->
  <div class="row">
    <div class="col-12 p-1 billscrl">
      <marquee width="90%" direction="left" onmouseover="this.stop();" onmouseout="this.start();">
        *** Your Bill is due from 20th January,2023. Please Complete Your Payment to Continue Your Service. ***
      </marquee>
    </div>
  </div>

  <!-- maincontent -->
  <div class="main p-4">
    <div class="row">
      <div class="col-8 dashbox">
        <div class="row">
          <div class="item col-2 active act me-2">
            <i class="bi bi-person-fill botic"></i>
            <h3>Active Student / Subscriber</h3>
            <hr class="rule">
            <a [routerLink]="['/StudentCourseRegistration']">
              <h1><b>{{totalNoActiveStudent}}</b></h1>
            </a>
          </div>
          <div class="item  col-2 active act1 me-2">
            <i class="bi bi-book-fill botic"></i>
            <h3>Active Course / Class / Branch</h3>
            <hr class="rule">
            <a [routerLink]="['/course']">
              <h1><b>{{totalNoCourse}}</b></h1>
            </a>
          </div>
          <div class="item col-2 active act2 me-2">
            <i class="bi bi-wallet-fill botic"></i>
            <h3>Total Received (Year)</h3>
            <hr class="rule">
            <a [routerLink]="['/AllIncomeReport']">
              <h1><b>{{totalYearlyCash + totalYearlyBank | currency:'INR'}}</b></h1>
            </a>
          </div>

          <div class="item col-2 active act3 me-2">
            <i class="bi bi-journal-text botic"></i>
            <h3>Online Exam</h3>
            <hr class="rule">
            <button pButton pRipple type="button" label="Active" class="p-button-rounded p-button-success"
              (click)="onlineExam()">
              <i class="bi bi-activity"> </i>
            </button>
          </div>
        </div>

        <!-- tabhere 
      <a href="#top">Back to top of page</a>-->
        <div class="thtab upcom mt-4">
          <div class="lefttabs">
            <i class="bi bi-bell-fill"></i>&nbsp; All Reports
            <mat-tab-group (selectedIndexChange)="onTabChanged($event)" [(selectedIndex)]="selectedIndex"
              animationDuration="200ms">
              <mat-tab>
                <ng-template mat-tab-label>
                  <i class="bi bi-bar-chart-fill"></i> &nbsp;
                  Monthly Income
                </ng-template>
                <div class="card mb-3">
                  <p class="text-center p-3"
                    style="color: rgb(8, 158, 45); font-weight: bolder; font-family: Arial, Helvetica, sans-serif; font-size: x-large;">
                    Report of Year Wise Income List</p>
                  <div class="card-body" style="padding: 0; margin: 0;">


                    <div class="table-responsive">

                      <table class="table table-bordered table-hover">
                        <thead class="thead-dark" style="background-color: coral;">
                          <tr style="color: rgb(163, 4, 26);">
                            <th scope="col">Year</th>
                            <th scope="col">Jan</th>
                            <th scope="col">Feb</th>
                            <th scope="col">Mar</th>
                            <th scope="col">Apr</th>
                            <th scope="col">May</th>
                            <th scope="col">June</th>
                            <th scope="col">July</th>
                            <th scope="col">Aug</th>
                            <th scope="col">Sep</th>
                            <th scope="col">Oct</th>
                            <th scope="col">Nov</th>
                            <th scope="col">Dec</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let item of pivotTableIncomeArray">
                            <td>{{item.YEAR}}</td>
                            <td>{{item.JAN | currency: 'INR'}}</td>
                            <td>{{item.FEB | currency: 'INR'}}</td>
                            <td>{{item.MAR | currency: 'INR'}}</td>
                            <td>{{item.APR | currency: 'INR'}}</td>
                            <td>{{item.MAY | currency: 'INR'}}</td>
                            <td>{{item.JUN | currency: 'INR'}}</td>
                            <td>{{item.JLY | currency: 'INR'}}</td>
                            <td>{{item.AUG | currency: 'INR'}}</td>
                            <td>{{item.SEP | currency: 'INR'}}</td>
                            <td>{{item.OCT | currency: 'INR'}}</td>
                            <td>{{item.NOV | currency: 'INR'}}</td>
                            <td>{{item.DEC | currency: 'INR'}}</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>


                  </div>

                </div>
              </mat-tab>

              <mat-tab>
                <ng-template mat-tab-label>
                  <mat-icon class="example-tab-icon">list</mat-icon>
                  Admission No
                </ng-template>
                <div class="card mb-3">
                  <h1 class="text-center pt-4"
                    style="color: rgb(8, 158, 45); font-weight: bolder; font-family: Arial, Helvetica, sans-serif;">
                    Report of Admission List</h1>
                  <div class="card-body" style="padding: 0; margin: 0;">


                    <div class="container table-responsive">

                      <table class="table table-bordered table-hover">
                        <thead class="thead-dark" style="background-color: coral;">
                          <tr>
                            <th scope="col">Year</th>
                            <th scope="col">Jan</th>
                            <th scope="col">Feb</th>
                            <th scope="col">March</th>
                            <th scope="col">April</th>
                            <th scope="col">May</th>
                            <th scope="col">June</th>
                            <th scope="col">July</th>
                            <th scope="col">August</th>
                            <th scope="col">Sept</th>
                            <th scope="col">Oct</th>
                            <th scope="col">Nov</th>
                            <th scope="col">Dec</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let item of pivotTableAdmissionArray">
                            <td>{{item.YEAR}}</td>
                            <td>{{item.JAN}}</td>
                            <td>{{item.FEB}}</td>
                            <td>{{item.MAR}}</td>
                            <td>{{item.APR}}</td>
                            <td>{{item.MAY}}</td>
                            <td>{{item.JUN}}</td>
                            <td>{{item.JLY}}</td>
                            <td>{{item.AUG}}</td>
                            <td>{{item.SEP}}</td>
                            <td>{{item.OCT}}</td>
                            <td>{{item.NOV}}</td>
                            <td>{{item.DEC}}</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>


                  </div>

                </div>
              </mat-tab>
              <mat-tab>
                <ng-template mat-tab-label>
                  <mat-icon class="example-tab-icon">list</mat-icon>
                  &nbsp; &nbsp; Inactive Student list &nbsp; <span
                    style="height: 20px;width: 20px;border-radius: 50%;background-color: red; border: 1px solid red;">
                    {{AllInactiveStudentArray.length}}</span>
                </ng-template>

                <!-------------------------------start show Receipt bill voucher------------------------------------- -->
                <div class="stutable">
                  <p-table #AllInactiveStudent [value]="AllInactiveStudentArray" dataKey="id" [paginator]="true"
                    [rows]="5" [showCurrentPageReport]="true"
                    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                    [rowsPerPageOptions]="[5,10,25,50]" [globalFilterFields]="['studentName','guardianName','address']">

                    <ng-template pTemplate="caption">
                      <div class="flex">
                        <button pButton label="Clear" class="p-button-outlined" icon="pi pi-filter-slash"
                          (click)="clear(AllInactiveStudent)"></button>
                        <span class="p-input-icon-left ml-auto">
                          <i class="pi pi-search"></i>
                          <input pInputText type="text"
                            (input)="AllInactiveStudent.filterGlobal(getEventValue($event), 'contains')"
                            placeholder="Search keyword" />
                        </span>

                      </div>
                    </ng-template>
                    <ng-template pTemplate="header">
                      <tr>
                        <th>Active</th>
                        <th>Delete</th>
                        <th pSortableColumn="studentName">Student Name <p-sortIcon field="studentName"></p-sortIcon>
                        </th>
                        <th pSortableColumn="guardianName">Guardian Name <p-sortIcon field="guardianName"></p-sortIcon>
                        </th>
                        <th pSortableColumn="address">Address <p-sortIcon field="address"></p-sortIcon>
                        </th>

                        <th>Entry Date</th>

                      </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-course>

                      <tr>
                        <td><button pButton class="p-button-rounded p-button-success p-button-outlined"
                            (click)="onUpdateStudentInforce(course.studentId)">
                            Active
                          </button></td>
                        <td><button pButton pRipple type="button" (click)="onDeleteStudentInforce(course.studentId)"
                            class="p-button-rounded p-button-danger p-button-outlined"><i
                              class="bi bi-trash3-fill"></i></button>
                          <!-- <p-button label="Danger" [rounded]="true" severity="danger"> -->
                          <!--  <button pButton class="p-button-rounded p-button-info p-button-outlined"
                            (click)="onDeleteStudentInforce(course.studentId)"> -->
                          <!--<i class="bi bi-trash3-fill"></i>
                          </button></p-button> -->
                        </td>
                        <td>{{course.studentName}}</td>
                        <td>{{course.guardianName}}</td>
                        <td>{{course.address}}</td>
                        <td>{{course.entryDate | date: 'dd/MM/yyyy'}}</td>

                      </tr>
                    </ng-template>
                    <ng-template pTemplate="paginatorleft">
                      <p-button type="button" icon="pi pi-plus" styleClass="p-button-text"></p-button>
                    </ng-template>
                  </p-table>

                </div>
                <!-------------------------------end show Receipt bill voucher------------------------------------- -->
              </mat-tab>
              <mat-tab>
                <ng-template mat-tab-label>
                  <mat-icon class="example-tab-icon">list</mat-icon>
                  &nbsp; &nbsp; Student To Course
                </ng-template>
                <!-- ------------ Student To Course ---------- -->
                <div class="p-3 flex-fill" style="width:100% ; background-color: white;">
                  <div class="container">
                    <form [formGroup]="studentToCourseFormGroup">
                      <div class="row">
                        <div class="col-sm-4">
                          <ng-select [items]="studentArray" fxFlex="100" bindLabel="studentName" class="custom"
                            bindValue="studentId" appendTo="body" formControlName="ledger_id" placeholder="Student Name"
                            (change)="changeStudent($event)">
                            <ng-template ng-option-tmp let-item="item">
                              {{item.studentName}} ({{item.qualification}}) 
                             </ng-template> 
                          </ng-select>
                          
                        </div>
                        <div class="col-sm-7">
                          <ng-select [items]="courses" fxFlex="100" bindLabel="full_name" class="custom" bindValue="id"
                            (change)="changeFeesModeType($event)" appendTo="body" formControlName="course_id"
                            placeholder="Course Name">

                            <ng-template ng-option-tmp let-item="item">
                     
                              <small> {{item.full_name}}| ({{item.fees_amount  | currency:'INR'}}) | {{item.fees_mode_type_name}} </small> 
                              
         
                             </ng-template> 
                          </ng-select>
                        </div>
                        <div class="col-sm-1"><a [routerLink]="['/course']">
                            <button type="button" class="btn btn-labeled btn-success">
                              <span class="btn-label">+</span>Add Course</button></a>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-4">
                          <mat-form-field style="width:100%">
                            <mat-label>Fees</mat-label>
                            <input matInput formControlName="base_fee" [(ngModel)]="feesAmount" placeholder="Fees"
                              readonly="yes">
                          </mat-form-field>
                        </div>
                        <div class="col-sm-4">
                          <mat-form-field style="width:100%">
                            <mat-label>Discount Allowed</mat-label>
                            <input matInput formControlName="discount_allowed" placeholder="Discount" required>
                          </mat-form-field>
                        </div>
                        <div class="col-sm-4">
                          <div class="form-group" *ngIf="hiddenInput">
                            <mat-form-field class="col-12">
                              <input matInput placeholder="Student Course ID" formControlName="studentToCourseID">
                            </mat-form-field>
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-4">
                          <mat-form-field style="width:100%">
                            <mat-label>Joinig Date</mat-label>
                            <input class="col-9" matInput #ref [matDatepicker]="joining_date"
                              formControlName="joining_date" (dateInput)="setJoiningSQL(ref.value)">
                            <div
                              *ngIf="studentToCourseFormGroup.controls['joining_date'].errors && studentToCourseFormGroup.controls['joining_date'].touched">
                              <mat-error class="text-right"
                                *ngIf="studentToCourseFormGroup.controls['joining_date'].errors['required']">Joinig is
                                required</mat-error>
                            </div>
                            <mat-datepicker-toggle matSuffix [for]="joining_date"></mat-datepicker-toggle>
                            <mat-datepicker #joining_date></mat-datepicker>

                          </mat-form-field>
                        </div>
                        <div class="col-sm-4">
                          <mat-form-field style="width:100%">
                            <mat-label>Effective Date</mat-label>
                            <input class="col-9" matInput #ref [matDatepicker]="effective_date"
                              formControlName="effective_date" (dateInput)="setEffectiveSQL(ref.value)">
                            <div
                              *ngIf="studentToCourseFormGroup.controls['effective_date'].errors && studentToCourseFormGroup.controls['effective_date'].touched">
                              <mat-error class="text-right"
                                *ngIf="studentToCourseFormGroup.controls['effective_date'].errors['required']">Effective
                                is
                                required</mat-error>
                            </div>
                            <mat-datepicker-toggle matSuffix [for]="effective_date"></mat-datepicker-toggle>
                            <mat-datepicker #effective_date></mat-datepicker>

                          </mat-form-field>
                        </div>
                        <div class="col-sm-4">
                          <div class="form-group" *ngIf="hiddenInput">
                            <mat-form-field class="col-12">
                              <input matInput placeholder="Transaction ID" formControlName="transactionMasterID">
                            </mat-form-field>
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-4">
                          <mat-form-field style="width:100%">
                            <mat-label>Duration:</mat-label>
                            <input matInput formControlName="actual_course_duration" placeholder="100" required>
                          </mat-form-field>
                        </div>
                        <div class="col-sm-4">
                          <ng-select [items]="durationTypes" bindLabel="durationName" class="custom"
                            bindValue="durationTypeId" formControlName="duration_type_id" autofocus appendTo="body"
                            placeholder="Duration Type">
                          </ng-select>
                        </div>
                        <div class="col-sm-4">
                          <ng-select [items]="section" fxFlex="100" bindLabel="sec" class="custom" bindValue="id"
                            appendTo="body" formControlName="section" placeholder="Select Section">
                          </ng-select>
                        </div>
                      </div>
                      <div align="right">
                        <button pButton [disabled]="!isValidForm()" (click)="saveStudentToCourse()"
                          class="p-button-rounded p-button-info">
                          <i class="bi bi-save" style="font-size: 1rem"> Save </i>
                        </button>


                      </div>
                    </form>

                  </div>
                </div>
              </mat-tab>
              <mat-tab>
                <ng-template mat-tab-label>
                  <mat-icon class="example-tab-icon">thumb_up</mat-icon>
                  Tax Invoice
                </ng-template>

                <!-------------------------------start show Receipt bill voucher------------------------------------- -->
                <div class="container" *ngIf="showReceipt">

                  <div id="print-AllReceiptBill-owner">
                    <div style="border: 2px dotted rgb(1, 1, 19);">
                      <div class="row">
                        <!-- <div class="col-2 ">
                          <img src="assets/img/baitLogo.png" width="100px" alt="AdminLTE Logo" style="opacity: .8">
                        </div> -->
                        <div class="col-12" align="center">

                          <p
                            style="margin-bottom: 0 ;margin-top: 0 ; font-size: large; font-family: 'Cooper Black'; font-weight: bolder;">
                            <!-- Barrackpore Academy Of Information Technology -->{{organisationName}}
                          </p>
                          <p style="margin-bottom: 0 ;margin-top: 0 ; font-size: medium;">{{organisationAddress}},
                            Pin:{{organisationPin}}</p>
                          <p style="margin-bottom: 0 ;margin-top: 0 ; font-size: medium;">
                            E-mail: &nbsp;{{organisationEmail}} | Contact: {{organisationContact}}</p>

                          <hr style="height:2px;border-width:0;color:gray;background-color:gray">
                        </div>

                      </div>

                    </div>
                    <div class="row">
                      <div class="col-7">
                        <table>
                          <tr>
                            <td>Student Name</td>
                            <td>:</td>
                            <th>{{billing_name}}</th>
                          </tr>
                          <tr>
                            <td>Contact No</td>
                            <td>:</td>
                            <th>{{whatsapp_number}}</th>
                          </tr>
                          <tr>
                            <td>Course Name</td>
                            <td>:</td>
                            <th>{{full_name}}</th>
                          </tr>
                        </table>
                      </div>
                      <div class="col-5">
                        <table>
                          <tr>
                            <td>Total Course Fees</td>
                            <td>:</td>
                            <th>{{total_course_fees | currency: 'INR'}}</th>
                          </tr>

                        </table>
                      </div>
                      <div class="row">
                        <div class="col-md text-center">
                          <table style="border-collapse: collapse; width: 100%; margin:0 auto;">
                            <thead>
                              <tr
                                style="border-top: 3px dotted rgb(1, 1, 19);border-bottom: 3px dotted rgb(116, 114, 114);background-color:rgb(196, 190, 190);padding: 0.5;">
                                <th>Sl No</th>
                                <th>Date</th>
                                <!--  <th>Receipt No</th> -->
                                <th>Fees Name</th>
                                <th>Comments</th>
                                <th class="text-right">Amount</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr *ngFor="let receipt of allBillReceiptArray; let i = index">

                                <td>{{i+1}}</td>
                                <td>{{receipt.transaction_date | date:'dd/MM/yyyy'}}</td>
                                <!-- <td>{{receipt.transaction_number }}</td> -->
                                <td>{{receipt.ledger_name}}</td>
                                <td>{{receipt.comment}}</td>
                                <td class="text-right">{{receipt.temp_total_received | currency: 'INR'}}</td>
                              </tr>

                            </tbody>
                            <tfoot>

                              <tr style="background-color: lightgrey; border-top: 1px solid rgb(1, 1, 19);">
                                <th colspan="3">&nbsp;</th>
                                <td class="text-right">Grand Total:</td>
                                <th class="text-right">{{totalRecepitAmount | currency: 'INR'}}</th>
                                <th>&nbsp;</th>
                              </tr>
                              <tr style="background-color: lightgrey; border-top: 1px solid rgb(1, 1, 19);">
                                <th colspan="3">&nbsp;</th>
                                <td class="text-right">Total Discount:</td>
                                <th class="text-right">- &nbsp;{{total_discount | currency:
                                  'INR'}}
                                </th>
                                <th>&nbsp;</th>
                              </tr>
                              <tr>
                                <th>In Words:</th>
                                <td>:</td>
                                <th colspan="3" class="text-left">{{rupeeInWords}}</th>
                              </tr>
                              <tr style="background-color: lightgrey; border: 1px solid rgb(1, 1, 19);">
                                <th colspan="3">&nbsp;</th>
                                <td class="text-right">Current Due</td>
                                <th class="text-right">{{(total_course_fees - totalRecepitAmount)-total_discount |
                                  currency: 'INR'}}</th>
                                <th>&nbsp;</th>

                              </tr>
                            </tfoot>
                          </table>
                        </div>
                      </div>
                      <div class="row" style="font-size: small;">
                        <div class="col-7">
                          Notice:<p style="margin-bottom: 0 ;margin-top: 0 ; font-style: oblique; font-size: small;">1)
                            It
                            is Computer Generated Bill</p>
                          <p style="margin-bottom: 0 ;margin-top: 0 ;font-style: oblique;">2) Advanced Fees Cannot be
                            Refund.</p>

                        </div>
                        <div class="col-3 ">
                          <p class="text-right">Signature</p>
                          <p class="text-right">-----------------</p>
                        </div>
                      </div>

                    </div>
                  </div>
                  <div mat-dialog-actions>
                    <button class="btn btn-danger" (click)="onClickedClosed()">Close</button>
                    <button class="btn btn-success" printSectionId="print-AllReceiptBill-owner"
                      printTitle="Develop By BAIT" ngxPrint>Print</button>

                  </div>
                </div>
                <!-------------------------------end show Receipt bill voucher------------------------------------- -->
              </mat-tab>
            </mat-tab-group>
          </div>
        </div>
      </div>
      <!-- bdaytable -->
      <div class="col-4 bday">
        <div class="upcom-1">
          <div class="upbday">
            <i class="bi bi-bell-fill"></i>&nbsp; Upcoming Birthday
            <span> <a [routerLink]="['/UpcomingBirthday']"> &nbsp; &nbsp;<span
                  style="background-color: red; border: 3px solid red;"> {{birthdayArray.length}}</span>
                &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<b>Click To View All</b>
              </a></span>
          </div>
          <div class="upcom-1-scroll">
            <table class="table table-hover">
              <thead>
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">Name</th>
                  <th scope="col">What's No</th>
                  <th scope="col">DOB</th>
                  <th scope="col">Day Left</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of birthdayArray; let indexOfelement=index;">
                  <th scope="row">{{indexOfelement+1}}</th>
                  <td>{{item.ledger_name}}</td>
                  <td>{{item.whatsapp_number}}</td>
                  <td>{{item.dob | date: 'dd/MM/yyyy'}}</td>
                  <td>{{item.PandingDays}}</td>
                </tr>

              </tbody>
            </table>
          </div>
        </div>

        <!-- Duelist -->
        <div class="upcom-2 mt-4">
          <div class="upbday">
            <i class="bi bi-bell-fill"></i>&nbsp; Upcoming Duelist &nbsp; &nbsp;<span
              style="background-color: red; border: 3px solid red;"> {{upcomingDueListArray.length}}</span>
            <span> <a [routerLink]="['/UpcomingDue']">
                &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<b>Click To View All</b>
              </a></span>
          </div>
          <div class="upcom-2-scroll" *ngIf="!showCourseDetails">
            <table class="table table-hover">
              <thead>
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">Name</th>
                  <th scope="col">What's No</th>
                  <th scope="col">Tran Date</th>
                  <th scope="col">Amount</th>
                  <th scope="col">Days</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of upcomingDueListArray; let indexOfelement=index;">
                  <th scope="row">{{indexOfelement+1}}</th>
                  <td>{{item.student_name}}</td>
                  <td>{{item.whatsapp_number}}</td>
                  <td>{{item.transaction_date | date: 'dd/MM/yyyy'}}</td>
                  <td>{{item.total_due | currency:'INR'}}</td>
                  <td>{{item.date_Diff}}</td>
                </tr>

              </tbody>
            </table>
          </div>
          <div class="upcom-2-scroll" *ngIf="showCourseDetails">
            <div class="container" style="font-size:medium ;">
              <table class="table">

                <thead>
                  <tr class="text-center">
                    <th colspan="3">
                      <h1>
                        Course Details</h1>
                    </th>
                  </tr>
                  <tr class="table-secondary">
                    <th scope="col">Fees Mode Type</th>
                    <th scope="col">:</th>
                    <th scope="col">{{fees_mode_type_name}}</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <th scope="col">Course Code</th>
                    <th scope="col">:</th>
                    <th scope="col">{{course_code}}</th>
                  </tr>
                  <tr>
                    <th scope="col">Short Name</th>
                    <th scope="col">:</th>
                    <th scope="col">{{short_name}}</th>
                  </tr>
                  <tr>
                    <th scope="col">Course Duration</th>
                    <th scope="col">:</th>
                    <th scope="col">{{course_duration}}&nbsp; [{{duration_name}}]</th>
                  </tr>
                  <tr>
                    <th scope="col">Description</th>
                    <th scope="col">:</th>
                    <th scope="col">{{description}}</th>
                  </tr>
                  <tr>
                    <th scope="col">Course Fees</th>
                    <th scope="col">:</th>
                    <th scope="col">{{courseFees | currency:'INR'}}</th>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- monthly/yearlydetai;s -->
    <!-- <div class="row mt-4">
      <div class="col-3 mon me-3 p-4">
        <div class="mhead mb-3">TOTAL MONTHLY INCOME</div>
        <div class="mbody"><i class="bi bi-cash-stack"></i>&nbsp;{{totalMonthlyIncome | currency:'INR'}}</div>
      </div>
      <div class="col-3 mon me-3 p-4">
        <div class="mhead mb-3">TOTAL MONTHLY CASH</div>
        <div class="mbody"><i class="bi bi-cash-stack"></i>&nbsp;{{totalMonthlyCash | currency:'INR'}}</div>
      </div>
      <div class="col-3 mon me-3 p-4">
        <div class="mhead mb-3">TOTAL MONTHLY BANK</div>
        <div class="mbody"><i class="bi bi-cash-stack"></i>&nbsp;{{totalMonthlyBank | currency:'INR'}}</div>
      </div>
      <div class="col-3 mon p-4">
        <div class="mhead mb-3">TOTAL YEARLY INCOME</div>
        <div class="mbody"><i class="bi bi-cash-stack"></i>&nbsp;{{totalYearlyIncome | currency:'INR'}}</div>
      </div>
    </div> -->
    <!-- student history details -->
    <mat-tab-group (selectedTabChange)="onTabChanged($event)" [(selectedIndex)]="selectedIndex"
      animationDuration="200ms"
      style="background-image: linear-gradient(to bottom right, rgb(8, 2, 68), rgb(7, 32, 146)); color: aliceblue; padding: 5px; border-radius: 10px; padding:0px;">
      <mat-tab>
        <ng-template mat-tab-label>
          <i class="bi bi-person-video"></i>
          &nbsp; Student / Subscriber History Details  &nbsp; <span
            style="height: 20px;width: 20px;border-radius: 50%;background-color: red; border: 1px solid red; font-weight: bolder;">
            {{studentRegistrationHistoryArray.length}}</span>
        </ng-template>
        <div class="stutable">


          <p-table #studentRegistrationHistory [value]="studentRegistrationHistoryArray" dataKey="id" [paginator]="true"
            [rows]="5" [showCurrentPageReport]="true"
            currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
            [rowsPerPageOptions]="[5,10,25,50]"
            [globalFilterFields]="['ledger_name','full_name','effective_date','fees_mode_type_name']">
  
            <ng-template pTemplate="caption">
              <div class="flex">
                <a [routerLink]="['/FeesReceived']"><p-button type="button" icon="pi pi-plus" label="Fees Received"
                    class="p-button-outlined"> </p-button></a>
                <span class="p-input-icon-left ml-auto">
                  <i class="pi pi-search"></i>
                  <input pInputText type="text"
                    (input)="studentRegistrationHistory.filterGlobal(getEventValue($event), 'contains')"
                    placeholder="Search keyword" />
                </span>
  
              </div>
            </ng-template>
            <ng-template pTemplate="header">
              <tr>
                <th>ID</th>
                <th pSortableColumn="ledger_id">Student Name <p-sortIcon field="ledger_name"></p-sortIcon>
                </th>
                <th pSortableColumn="course_id">Course Name <p-sortIcon field="full_name"></p-sortIcon>
                </th>
                <th pSortableColumn="fees_mode_type_name">Type Mode <p-sortIcon field="fees_mode_type_name"></p-sortIcon>
                </th>
                <th>Contact No</th>
                <th pSortableColumn="effective_date">Admission Date <p-sortIcon field="effective_date"></p-sortIcon>
                </th>
                <th pSortableColumn="is_completed">Status<p-sortIcon field="is_completed"></p-sortIcon>
                </th>
                <th>Total Course Fees</th>
                <th>Total Received</th>
                <th>Total Due</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-course>
  
              <tr>
                <td><button pButton class="p-button-rounded p-button-info p-button-outlined"
                    (click)="onClickedReceiptVoucher(course.id)">
                    <i class="bi bi-printer"> </i>
                  </button></td>
                <td>{{course.ledger_name}}</td>
                <td>{{course.full_name}}</td>
                <td>{{course.fees_mode_type_name}}</td>
                <td>{{course.whatsapp_number}}</td>
                <td>{{course.effective_date | date: 'dd/MM/yyyy'}}</td>
                <td> <p-button type="button" icon="pi pi-plus" label="Complete" (click)="onStatusChange(course.id)"
                  class="p-button-outlined"> </p-button> </td>
                <td>{{course.total_course_fees | currency:'INR'}}</td>
                <td>{{course.total_received | currency:'INR'}}</td>
                <td>{{course.total_due | currency:'INR'}}</td>
              </tr>
            </ng-template>
            <ng-template pTemplate="paginatorleft">
              <p-button type="button" (click)="clear(studentRegistrationHistory)" label="Clear" icon="pi pi-filter-slash"
                styleClass="p-button-outlined"></p-button>
            </ng-template>
          </p-table>
  
        </div>
      </mat-tab>
    </mat-tab-group>

   
    <!-- Auto Generate Fees Charge details -->
    <div class="row mt-4 upcom">
      <div class="stuhisdtl">
        <i class="bi bi-person-video"></i>
        &nbsp; Monthly Auto Generate Fees Charge &nbsp; <span
          style="height: 50px;width: 50px;border-radius: 50%;background-color: red; border: 3px solid red;">
          {{monthlyStudentArray.length}}</span>
      </div>
      <div class="p-2 text-right">
        <button type="button" class="btn btn-success" (click)="saveAllStudentMonthly()">
          Generate All Fees Charged
        </button>
      </div>
      <div class="stutable">


        <p-table #monthlyStudent [value]="monthlyStudentArray" dataKey="id" [paginator]="true" [rows]="5"
          [showCurrentPageReport]="true" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
          [rowsPerPageOptions]="[5,10,25,50]" [globalFilterFields]="['ledger_name','full_name','transaction_date']">

          <ng-template pTemplate="caption">
            <div class="flex">
              <button pButton label="Clear" class="p-button-outlined" icon="pi pi-filter-slash"
                (click)="clear(monthlyStudent)"></button>
              <span class="p-input-icon-left ml-auto">
                <i class="pi pi-search"></i>
                <input pInputText type="text" (input)="monthlyStudent.filterGlobal(getEventValue($event), 'contains')"
                  placeholder="Search keyword" />
              </span>

            </div>
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th>ID</th>

              <th pSortableColumn="ledger_id">Student Name <p-sortIcon field="ledger_name"></p-sortIcon>
              </th>
              <th pSortableColumn="course_id">Course Name <p-sortIcon field="full_name"></p-sortIcon>
              </th>

              <th pSortableColumn="transaction_date">Transaction Date <p-sortIcon field="transaction_date"></p-sortIcon>
              </th>
              <th pSortableColumn="fees_month">Month No.<p-sortIcon field="fees_month"></p-sortIcon>
              </th>
              <th>amount</th>

            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-course let-rowIndex="rowIndex">

            <tr>
              <td>{{rowIndex+1}}</td>
              <td>{{course.ledger_name}}</td>
              <td>{{course.full_name}}</td>
              <td>{{course.transaction_date | date: 'dd/MM/yyyy'}}</td>
              <td>{{course.fees_month+1}}</td>
              <td>{{course.amount | currency:'INR'}}</td>

            </tr>
          </ng-template>
          <ng-template pTemplate="paginatorleft">
            <p-button type="button" icon="pi pi-plus" styleClass="p-button-text"></p-button>
          </ng-template>
        </p-table>

      </div>
    </div>
  </div>

</div>